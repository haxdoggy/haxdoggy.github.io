<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Haxdoggy — Terminal</title>
<style>
  :root {
    --bg: #000;
    --text: #7CFF4C;
    --muted: #3a3a3a;
    --glow: 0 0 14px rgba(124,255,76,0.25);
    --prompt-bg: rgba(255,255,255,0.02);
  }
  html, body { height:100%; margin:0; font-family: "Courier New", monospace; background:var(--bg); color:var(--text); }
  .wrap { box-sizing:border-box; padding:20px; height:100vh; display:flex; flex-direction:column; gap:12px; }
  #terminal { flex:1; overflow:auto; border-radius:8px; padding:18px; background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.85)); box-shadow: var(--glow); border:1px solid rgba(124,255,76,0.06); }
  pre#output { white-space:pre-wrap; word-break:break-word; margin:0; line-height:1.3; font-size:15px; }
  .prompt-row { display:flex; gap:8px; align-items:center; margin-top:8px; }
  .prompt-label { min-width:160px; color:var(--text); background:var(--prompt-bg); padding:6px 10px; border-radius:6px; box-shadow: inset 0 -2px rgba(0,0,0,0.2); }
  #cmdline { flex:1; background:transparent; border:none; outline:none; color:var(--text); font:inherit; padding:8px 10px; border-radius:6px; }
  #cmdline::placeholder { color: rgba(124,255,76,0.35); }
  .caret { display:inline-block; width:10px; height:18px; margin-left:4px; vertical-align:middle; background:var(--text); animation:blink 1s steps(2,start) infinite; border-radius:2px; box-shadow:var(--glow); }
  @keyframes blink { 50% { opacity:0 } }
  button#copyBtn { background:transparent; color:var(--muted); border:1px solid rgba(124,255,76,0.06); padding:6px 8px; border-radius:6px; cursor:pointer; }
  .muted { color:var(--muted); font-size:13px; }
  @media (max-width:600px){ .prompt-label{min-width:120px; font-size:13px;} pre#output{font-size:13px;} }
  a.link { color:var(--text); text-decoration:underline; }
</style>
</head>
<body>
<div class="wrap">
  <div id="terminal" role="region" aria-live="polite" aria-label="Terminal">
    <pre id="output" aria-hidden="false"></pre>
  </div>

  <div class="prompt-row" aria-hidden="false">
    <div class="prompt-label" id="promptLabel">root@kali:~$</div>
    <input id="cmdline" type="text" autocomplete="off" autocapitalize="none" autocorrect="off" spellcheck="false"
      placeholder="Type 'help' for commands" aria-label="Terminal input">
    <span class="caret" id="caret" aria-hidden="true"></span>
    <button id="copyBtn" title="Copy terminal content">Copy</button>
  </div>

  <div class="muted">Terminal theme — updated</div>
</div>

<script>
/* ---------------- DOM ELEMENTS ---------------- */
const output = document.getElementById('output');
const input = document.getElementById('cmdline');
const terminal = document.getElementById('terminal');
const copyBtn = document.getElementById('copyBtn');

/* ---------------- ASCII LOGO ---------------- */
const startLogo = `
#     █████   █████   █████████   █████ █████ ██████████      ███████      █████████    █████████  █████ █████
#    ░░███   ░░███   ███░░░░░███ ░░███ ░░███ ░░███░░░░███   ███░░░░░███   ███░░░░░███  ███░░░░░███░░███ ░░███ 
#     ░███    ░███  ░███    ░███  ░░███ ███   ░███   ░░███ ███     ░░███ ███     ░░░  ███     ░░░  ░░███ ███  
#     ░███████████  ░███████████   ░░█████    ░███    ░███░███      ░███░███         ░███           ░░█████   
#     ░███░░░░░███  ░███░░░░░███    ███░███   ░███    ░███░███      ░███░███    █████░███    █████   ░░███    
#     ░███    ░███  ░███    ░███   ███ ░░███  ░███    ███ ░░███     ███ ░░███  ░░███ ░░███  ░░███     ░███    
#     █████   █████ █████   █████ █████ █████ ██████████   ░░░███████░   ░░█████████  ░░█████████     █████   
#    ░░░░░   ░░░░░ ░░░░░   ░░░░░ ░░░░░ ░░░░░ ░░░░░░░░░░      ░░░░░░░      ░░░░░░░░░    ░░░░░░░░░     ░░░░░    
`;

const welcomeMsg = "\nWelcome to haxdoggy.io. Type 'help' for commands.\n\n";

/* ---------------- TERMINAL STATE ---------------- */
let history = [];
let historyIndex = -1;

/* ---------------- COMMANDS ---------------- */
const commands = {
  help: { desc:"Show available commands", exec:()=> appendText("Available commands:\n  help — Show this help\n  home — Show home text\n  contact — Show contact info\n  github — Open GitHub (new tab)\n  clear — Clear terminal (logo stays)\nTips: use arrow up/down for history, Tab for autocomplete.\n") },
  home: { desc:"Home text", exec:()=> appendText("Welcome to haxdoggy.io — Hacking the matrix since 1995.\n") },
  contact: { desc:"Contact info", exec:()=> appendText("Email: haxdoggy@proton.me\nGitHub: https://github.com/haxdoggy\n") },
  github: { desc:"Open GitHub", exec:()=> { appendText("Opening GitHub in a new tab...\n"); window.open("https://github.com/haxdoggy","_blank","noopener"); } },
  clear: { desc:"Clear terminal", exec:()=> { 
    output.textContent = "";            // First clear everything
    appendText(startLogo + welcomeMsg); // Then re-display logo + welcome
  } }
};

/* ---------------- UTILITIES ---------------- */
function appendText(text){ output.textContent += text; scrollToBottom(); }
function scrollToBottom(){ terminal.scrollTop = terminal.scrollHeight; }
function runCommand(cmd){
  if(commands[cmd]){ try{ commands[cmd].exec(); } catch(e){ appendText("Error: " + e + "\n"); } return; }
  appendText(`Command '${cmd}' not found. Try 'help'.${suggestSuggestion(cmd)}\n`);
}
function suggestSuggestion(cmd){ const close=Object.keys(commands).filter(n=>n.includes(cmd.slice(0,2))); return close.length? "\nSuggestion: "+close.join(', '):""; }

/* ---------------- INPUT HANDLING ---------------- */
function handleInput(ev){
  switch(ev.key){
    case 'Enter': ev.preventDefault(); const cmd=input.value.trim(); if(!cmd) return; appendText(`root@kali:~$ ${cmd}\n`); runCommand(cmd.toLowerCase()); history.unshift(cmd); historyIndex=-1; input.value=''; break;
    case 'ArrowUp': ev.preventDefault(); navigateHistory(1); break;
    case 'ArrowDown': ev.preventDefault(); navigateHistory(-1); break;
    case 'Tab': ev.preventDefault(); autocomplete(); break;
  }
}
function navigateHistory(dir){
  if(dir===1 && historyIndex<history.length-1){ historyIndex++; input.value=history[historyIndex]; }
  else if(dir===-1){ if(historyIndex>0){ historyIndex--; input.value=history[historyIndex]; } else{ historyIndex=-1; input.value=''; } }
  setTimeout(()=>input.setSelectionRange(input.value.length,input.value.length),0);
}
function autocomplete(){
  const val=input.value.trim().toLowerCase();
  if(!val) return;
  const matches=Object.keys(commands).filter(n=>n.startsWith(val));
  if(matches.length===1) input.value=matches[0]+' ';
  else if(matches.length>1) appendText(matches.join('   ')+"\n");
}

/* ---------------- COPY BUTTON ---------------- */
copyBtn.addEventListener('click',()=>{ navigator.clipboard.writeText(output.textContent).then(()=>{ copyBtn.textContent="Copied!"; setTimeout(()=>copyBtn.textContent="Copy",1300); }).catch(()=>{ copyBtn.textContent="Copy failed"; setTimeout(()=>copyBtn.textContent="Copy",1300); }); });

/* ---------------- FOCUS HANDLING ---------------- */
input.focus();
terminal.addEventListener('click',()=>input.focus());
document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') input.blur(); });
input.addEventListener('keydown',handleInput);

/* ---------------- TYPEWRITER EFFECT ---------------- */
function typeWriter(text,i=0){ output.textContent=text.slice(0,i); scrollToBottom(); if(i<text.length) setTimeout(()=>typeWriter(text,i+1),1); }

/* ---------------- START TERMINAL ---------------- */
typeWriter(startLogo + welcomeMsg);
</script>
</body>
</html>
